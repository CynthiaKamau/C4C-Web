(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2b2c"],{"24e9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{"justify-center":"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md10:""}},[a("material-card",{attrs:{color:"green",title:"Add a New Device",text:"Kindly fill all the required fields"}},[a("v-card-text",[a("div"),t._v(" "),a("p",{staticClass:"display-1 text--primary"},[t._v("\n            Add A New Device\n          ")]),t._v(" "),a("div",{staticClass:"text--primary"},[t._v("\n            Kindly fill all the required fields\n          ")])]),t._v(" "),a("v-form",{on:{submit:t.AddDevice}},[a("v-container",{attrs:{"py-0":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md3:""}},[a("v-combobox",{staticClass:"purple-input",attrs:{rules:[t.rules.required],items:t.facilities,label:"Facility"},model:{value:t.facility_id,callback:function(e){t.facility_id=e},expression:"facility_id"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{staticClass:"green-input",attrs:{rules:[t.rules.required],label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md3:""}},[a("v-switch",{attrs:{label:"Safety Engineered?  "+t.switch1.toString()},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:"","text-xs-right":""}},[a("v-btn",{staticClass:"mx-0 font-weight-light",attrs:{type:"submit",color:"success"}},[t._v("\n                  Submit\n                ")])],1)],1)],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("material-card",{attrs:{color:"blue",title:"Add a New Device",text:"Devices List"}},[a("v-layout",{attrs:{wrap:""}},[a("v-card-text",[a("div"),t._v(" "),a("p",{staticClass:"display-1 text--primary"},[t._v("\n              Devices List\n            ")]),t._v(" "),a("v-btn",{staticStyle:{margin:"0 0 20px 20px"},attrs:{loading:t.downloadLoading,color:"primary"},on:{click:t.handleDownload}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-download")]),t._v("Export Excel\n            ")],1)],1),t._v(" "),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,loading:!0,"rows-per-page-items":t.rowsPerPageItems},scopedSlots:t._u([{key:"headerCell",fn:function(e){var i=e.header;return[a("span",{staticClass:"subheading text--darken-3",domProps:{textContent:t._s(i.text)}})]}},{key:"items",fn:function(e){var i=e.item;return[a("td",[t._v(t._s(i.name))]),t._v(" "),a("td",[t._v(t._s(Boolean(i.safety_designed)))]),t._v(" "),a("td",[t._v(t._s(i.created_at))])]}}])})]],2)],1)],1)],1),t._v(" "),a("v-snackbar",{attrs:{color:t.color,bottom:t.bottom,top:t.top,left:t.left,right:t.right,dark:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[a("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[t._v("\n      mdi-bell-plus\n    ")]),t._v(" "),a("div",[t._v(t._s(t.pre_out)+" "+t._s(t.output.message)),a("br"),t._v(" "+t._s(t.output.errors))]),t._v(" "),a("v-icon",{attrs:{size:"16"},on:{click:function(e){t.snackbar=!1}}},[t._v("\n      mdi-close-circle\n    ")])],1)],1)},s=[],n=a("bc3a"),r=a.n(n),o={data:function(){return{rowsPerPageItems:[50,250,500],switch1:!0,name:"",facility_id:"",facilities:[],headers:[{sortable:!1,text:"Name",value:"name"},{sortable:!1,text:"Safety Design",value:"safety_designed"},{sortable:!1,text:"Created On",value:"created_at"}],items:[],facilities_all:[],rules:{required:function(t){return!!t||"Required."}},resp:!1,output:"",pre_out:"",color:null,colors:["success","error"],top:!0,bottom:!1,left:!1,right:!1,snackbar:!1,downloadLoading:!1,filename:"Devices",autoWidth:!0,bookType:"xlsx"}},created:function(){this.DeviceList(),this.Facilities()},methods:{checkData:function(){return""==this.facility_id?(this.pre_out="Pick facilty to proceed",this.snack("top","center"),!1):""!=this.name||(this.pre_out="Provide device name to proceed",this.snack("top","center"),!1)},Facilities:function(){var t=this;r.a.get("facilities").then((function(e){for(var a in t.facilities_all=e.data.data,e.data.data)t.facilities.push(t.facilities_all[a].name)}))},DeviceList:function(){var t=this;r.a.get("devices/all/").then((function(e){t.items=e.data.data,console.log(e.data)})).catch((function(t){return console.log(t.message)}))},AddDevice:function(t){var e=this;t.preventDefault(),this.checkData()&&r.a.post("devices/create",{facility_id:this.facilities_all[this.facilities.indexOf(this.facility_id)].id,name:this.name,safety_designed:this.switch1}).then((function(t){e.output=t.data,e.resp=Boolean(t.data.success),e.snack("top","center"),e.items=[],e.DeviceList()})).catch((function(t){e.output=t,e.snack("top","center")}))},handleDownload:function(){var t=this;this.downloadLoading=!0,a.e("chunk-0e610f46").then(a.bind(null,"4bf8")).then((function(e){var a=["Name","Safety Designed","Created On"],i=["name","safety_designed","created_at"],s=t.items,n=t.formatJson(i,s);e.export_json_to_excel({header:a,data:n,filename:t.filename,autoWidth:t.autoWidth,bookType:t.bookType}),t.downloadLoading=!1}))},formatJson:function(t,e){return console.log(e),e.map((function(a){return t.map((function(t){return"timestamp"===t?parseTime(a[t]):(console.log(e),a[t])}))}))},snack:function(){this.top=!1,this.bottom=!1,this.left=!1,this.right=!1;for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];for(var i=0,s=e;i<s.length;i++){var n=s[i];this[n]=!0}this.resp?this.color=this.colors[0]:this.color=this.colors[1],this.snackbar=!0}}},l=o,c=a("2877"),d=Object(c["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b2b2c.f3d7c901.js.map