(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e55a4"],{"93b6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[r("v-layout",{attrs:{"justify-center":"",wrap:""}},[r("v-flex",{attrs:{md12:""}},[r("v-snackbar",{attrs:{timeout:12e3,color:"error",top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[r("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[e._v("\n          mdi-bell-plus\n        ")]),e._v(" "),r("div",[e._v(" "+e._s(e.output.error)+" "+e._s(e.result))]),e._v(" "),r("v-icon",{attrs:{size:"16"},on:{click:function(t){e.snackbar=!1}}},[e._v("\n          mdi-close-circle\n        ")])],1),e._v(" "),r("material-card",{attrs:{color:"green",title:"Broadcast Messages"}},[r("v-card-text",[r("div"),e._v(" "),r("p",{staticClass:"display-1 text--primary"},[e._v("\n            List of Exposures\n          ")])]),e._v(" "),r("v-container",{attrs:{"py-0":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",md10:""}},[r("v-text-field",{attrs:{"append-icon":"mdi-search-web",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:"",md2:""}},[r("v-btn",{attrs:{loading:e.downloadLoading,color:"primary"},on:{click:e.handleDownload}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-download")]),e._v("Export Excel\n              ")],1)],1)],1)],1),r("br"),e._v(" "),r("v-data-table",{attrs:{headers:e.headers,items:e.exposures,search:e.search,"rows-per-page-items":e.rowsPerPageItems,loading:!0},scopedSlots:e._u([{key:"items",fn:function(t){return[r("tr",{on:{click:function(e){t.expanded=!t.expanded}}},[r("td",[e._v(e._s(e.exposures.indexOf(t.item)+1))]),e._v(" "),r("td",[e._v(e._s(t.item.gender))]),e._v(" "),r("td",[e._v(e._s(t.item.cadre))]),e._v(" "),r("td",[e._v(e._s(t.item.facility))]),e._v(" "),t.item.device_used?r("td",[e._v(e._s(t.item.device_used))]):r("td",[e._v("Not Specified")]),e._v(" "),r("td",[e._v(e._s(t.item.exposure_type))]),e._v(" "),r("td",[e._v(e._s(t.item.exposure_location))]),e._v(" "),r("td",[e._v(e._s(Boolean(t.item.pep_initiated)))]),e._v(" "),r("td",[e._v(e._s(t.item.exposure_date))]),e._v(" "),r("td",[t.expanded?r("v-icon",[e._v("mdi-arrow-down")]):r("v-icon",[e._v("mdi-arrow-right")])],1)])]}},{key:"expand",fn:function(t){return[r("v-card",{attrs:{outlined:"",dark:!0}},[r("v-container",{attrs:{"py-0":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",md6:""}},[r("v-card-text",[e._v("\n                      facility: "+e._s(t.item.facility)+" "),r("br"),e._v("\n                      Pep Date: "+e._s(t.item.pep_date)+" "),r("br"),e._v("\n                      patient hiv status: "+e._s(t.item.patient_hiv_status)+" "),r("br"),e._v("\n                      patient hbv status: "+e._s(t.item.patient_hbv_status)+"\n                    ")])],1),e._v(" "),r("v-flex",{attrs:{xs12:"",md4:""}},[r("v-card-text",[e._v("\n                      device purpose: "+e._s(t.item.device_purpose)+" "),r("br"),e._v("\n                      previous exposures: "+e._s(t.item.previous_exposures)+" "),r("br"),e._v("\n                      exposure result of: "),r("span",{domProps:{textContent:e._s(t.item.result_of?t.item.result_of:"Not specified")}}),e._v(" "),r("br"),e._v("\n                      exposure description: "+e._s(t.item.exposure_description)+"\n                    ")])],1)],1)],1)],1)]}}])},[r("template",{slot:"no-data"},[r("v-progress-linear",{attrs:{slot:"progress",indeterminate:""},slot:"progress"})],1),e._v(" "),r("v-alert",{attrs:{slot:"no-results",value:!0,color:"success",icon:"mdi-emoticon-sad"},slot:"no-results"},[e._v('\n            Your search for "'+e._s(e.search)+'" found no results.\n          ')])],2)],1)],1)],1)],1)},n=[],s=r("4795"),o=r.n(s),i=r("bc3a"),c=r.n(i),u=r("2f62");function l(e,t,r,a,n,s,o){try{var i=e[s](o),c=i.value}catch(u){return void r(u)}i.done?t(c):Promise.resolve(c).then(a,n)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var s=e.apply(t,r);function o(e){l(s,a,n,o,i,"next",e)}function i(e){l(s,a,n,o,i,"throw",e)}o(void 0)}))}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x={data:function(){return{rowsPerPageItems:[100,500,1e3],search:"",link:"",output:"",isLoading:!0,result:"",snackbar:!1,headers:[{text:"No.",value:"No."},{sortable:!1,text:"Gender",value:"gender"},{text:"Cadre",value:"cadre"},{text:"Facility",value:"facility"},{text:"Device",value:"device_used"},{sortable:!1,text:"Type",value:"exposure_type"},{text:"Location",value:"exposure_location"},{text:"Pep Initiated",value:"pep_initiated"},{text:"Exposure Date",value:"exposure_date"}],exposures:[],downloadLoading:!1,filename:"Exposures ".concat((new Date).toISOString()),autoWidth:!0,bookType:"xlsx"}},computed:v({},Object(u["c"])({user:"auth/user",token:"auth/token",e:"auth/expo"})),created:function(){0===this.exposures.length?this.getExp():this.exposures=this.e},methods:{getExp:function(){var e=this;1===this.user.role_id||2===this.user.role_id||5===this.user.role_id?c.a.get("exposures/all").then((function(t){e.exposures=t.data.data,e.loopT(t.data.links.next),e.isLoading=!1})).catch((function(){e.error=!0,e.result="Check your internet connection or retry logging in.",e.snackbar=!0})):4===this.user.role_id&&c.a.get("exposures/facility/".concat(this.user.hcw.facility_id)).then((function(t){e.exposures=t.data.data,e.loopT(t.data.links.next),e.isLoading=!1})).catch((function(){e.error=!0,e.result="Check your internet connection or retry logging in.",e.snackbar=!0}))},loopT:function(e){var t=this;return d(o.a.mark((function r(){var a,n,s,i;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=[],1!==t.user.role_id&&2!==t.user.role_id){r.next=17;break}a=0;case 3:if(!(a<1)){r.next=15;break}if(null==e){r.next=12;break}return r.next=7,c.a.get(e);case 7:s=r.sent,e=s.data.links.next,t.exposures=t.exposures.concat(s.data.data),r.next=13;break;case 12:a=11;case 13:r.next=3;break;case 15:r.next=34;break;case 17:if(5!==t.user.role_id){r.next=34;break}a=0;case 19:if(!(a<1)){r.next=31;break}if(null==e){r.next=28;break}return r.next=23,c.a.get(e);case 23:i=r.sent,e=i.data.links.next,t.exposures=t.exposures.concat(i.data.data),r.next=29;break;case 28:a=11;case 29:r.next=19;break;case 31:for(a in a=0,t.exposures)t.exposures[a].county===t.user.county&&n.push(t.exposures[a]);t.exposures=n;case 34:case"end":return r.stop()}}),r)})))()},handleDownload:function(){var e=this;this.downloadLoading=!0,r.e("chunk-0e610f46").then(r.bind(null,"4bf8")).then((function(t){var r=["Gender","Cadre","Facility","Previous Exposures","Type","Device","Location","Result","Description","Patient HIV Status","Patient HBV Status","Pep initiated","Pep Date","Exposure Date"],a=["gender","cadre","facility","previous_exposures","exposure_type","device_used","exposure_location","result_of","exposure_description","patient_hiv_status","patient_hbv_status","pep_initiated","pep_date","exposure_date"],n=e.exposures,s=e.formatJson(a,n);t.export_json_to_excel({header:r,data:s,filename:e.filename,autoWidth:e.autoWidth,bookType:e.bookType}),e.downloadLoading=!1}))},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return""===t[e]?"Not Specified":"pep_initiated"===e?Boolean(t[e]):t[e]}))}))}}},f=x,h=r("2877"),b=Object(h["a"])(f,a,n,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0e55a4.fa3cd688.js.map