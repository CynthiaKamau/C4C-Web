(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207344"],{a010:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[r("v-layout",{attrs:{"justify-center":"",wrap:""}},[r("v-flex",{attrs:{md12:""}},[r("v-snackbar",{attrs:{color:"error",timeout:12e3,top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[r("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[e._v("\n      mdi-bell-plus\n    ")]),e._v(" "),r("div",[e._v(" "+e._s(e.result))]),e._v(" "),r("v-icon",{attrs:{size:"16"},on:{click:function(t){e.snackbar=!1}}},[e._v("\n      mdi-close-circle\n    ")])],1),e._v(" "),r("v-card",[r("v-card-title",[e._v("\n          All Users\n          "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("v-flex",{attrs:{xs12:"",md2:""}},[r("v-btn",{attrs:{loading:e.downloadLoading,color:"primary"},on:{click:e.handleDownload}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-download")]),e._v("Export Excel\n            ")],1)],1)],1),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.filteredList,loading:!0,search:e.search,"rows-per-page-items":e.rowsPerPageItems,"item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.id))]),e._v(" "),r("td",[e._v(e._s(t.item.county))]),e._v(" "),r("td",[e._v(e._s(t.item.sub_county))]),e._v(" "),r("td",[e._v(e._s(t.item.cadre))]),e._v(" "),r("td",[e._v(e._s(t.item.gender))])]}}])},[r("template",{slot:"no-data"},[r("v-progress-linear",{attrs:{slot:"progress",indeterminate:""},slot:"progress"})],1),e._v(" "),r("v-alert",{attrs:{slot:"no-results",value:!0,color:"success",icon:"mdi-emoticon-sad"},slot:"no-results"},[e._v('\n            Your search for "'+e._s(e.search)+'" found no results.\n          ')])],2)],1)],1)],1)],1)},a=[],s=r("4795"),o=r.n(s),i=r("bc3a"),c=r.n(i),l=r("2f62");function u(e,t,r,n,a,s,o){try{var i=e[s](o),c=i.value}catch(l){return void r(l)}i.done?t(c):Promise.resolve(c).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){u(s,n,a,o,i,"next",e)}function i(e){u(s,n,a,o,i,"throw",e)}o(void 0)}))}}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={data:function(){return{rowsPerPageItems:[100,500,2e3,5e3,1e4],search:"",isLoading:!0,all_users:[],snackbar:!1,result:"",downloadLoading:!1,filename:"Users ".concat((new Date).toISOString()),autoWidth:!0,bookType:"xlsx",headers:[{sortable:!0,text:"ID",value:"id"},{sortable:!1,text:"County",value:"county"},{sortable:!1,text:"Sub County",value:"sub_county"},{sortable:!1,text:"Cadre",value:"cadre"},{sortable:!1,text:"Gender",value:"gender"}]}},created:function(){this.getUsers()},computed:v(v({},Object(l["c"])({user:"auth/user"})),{},{filteredList:function(){var e=this;return this.new_users=this.all_users.filter((function(t){return t.county===e.user.county}))}}),methods:{getUsers:function(){var e=this;1===this.user.role_id||2===this.user.role_id||5===this.user.role_id?c.a.get("hcw").then((function(t){e.all_users=t.data.data,e.loopT(t.data.links.next),e.isLoading=!1})).catch((function(){e.error=!0,e.result="Check your internet connection or retry logging in.",e.snackbar=!0})):4===this.user.role_id&&c.a.get("hcw/facility/".concat(this.user.hcw.facility_id)).then((function(t){e.all_users=t.data.data,e.loopH(t.data.links.next),e.isLoading=!1})).catch((function(){e.result="Check your internet connection or retry logging in.",e.snackbar=!0}))},loopT:function(e){var t=this;return d(o.a.mark((function r(){var n,a,s,i;return o.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=[],1!==t.user.role_id&&2!==t.user.role_id){r.next=17;break}n=0;case 3:if(!(n<1)){r.next=15;break}if(null==e){r.next=12;break}return r.next=7,c.a.get(e);case 7:s=r.sent,e=s.data.links.next,t.all_users=t.all_users.concat(s.data.data),r.next=13;break;case 12:n=100;case 13:r.next=3;break;case 15:r.next=34;break;case 17:if(5!==t.user.role_id){r.next=34;break}n=0;case 19:if(!(n<1)){r.next=31;break}if(null==e){r.next=28;break}return r.next=23,c.a.get(e);case 23:i=r.sent,e=i.data.links.next,t.all_users=t.all_users.concat(i.data.data),r.next=29;break;case 28:n=11;case 29:r.next=19;break;case 31:for(n in n=0,t.all_users)t.all_users[n].county===t.user.county&&a.push(t.all_users[n]);t.all_users=a;case 34:case"end":return r.stop()}}),r)})))()},handleDownload:function(){var e=this;this.downloadLoading=!0,r.e("chunk-0e610f46").then(r.bind(null,"4bf8")).then((function(t){var r=["ID","County","Sub County","Role","Cadre","Gender"],n=["id","county","sub_county","role_id","cadre","gender"],a=e.all_users,s=e.formatJson(n,a);t.export_json_to_excel({header:r,data:s,filename:e.filename,autoWidth:e.autoWidth,bookType:e.bookType}),e.downloadLoading=!1}))},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))}}},_=h,p=r("2877"),m=Object(p["a"])(_,n,a,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d207344.67d01ef9.js.map