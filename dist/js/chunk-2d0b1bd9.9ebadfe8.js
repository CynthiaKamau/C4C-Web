(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b1bd9"],{"20af":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{"justify-center":"",wrap:""}},[a("v-snackbar",{attrs:{timeout:12e3,color:"error",top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[e._v("\n        mdi-bell-plus\n      ")]),e._v(" "),a("div",[e._v(" "+e._s(e.output.errors)+" "+e._s(e.result))]),e._v(" "),a("v-icon",{attrs:{size:"16"},on:{click:function(t){e.snackbar=!1}}},[e._v("\n        mdi-close-circle\n      ")])],1),e._v(" "),a("v-flex",{attrs:{xs12:"","text-xs-right":""}},[1===e.user.role_id||2===e.user.role_id||5===e.user.role_id?a("div",[a("v-btn",{staticClass:"mx-0 font-weight-light ",attrs:{color:"success"},on:{click:function(t){e.$router.push("new_bulk_broadcast")}}},[e._v("\n          Send A Bulk Broadcast\n        ")]),e._v(" "),a("v-btn",{staticClass:"mx-0 font-weight-light ",attrs:{color:"success"},on:{click:function(t){e.$router.push("new_broadcast")}}},[e._v("\n          Send A New Broadcast\n        ")])],1):a("div",[a("v-btn",{staticClass:"mx-0 font-weight-light ",attrs:{color:"success"},on:{click:function(t){e.$router.push("new_broadcast")}}},[e._v("\n          Send A New Broadcast\n        ")])],1)]),e._v(" "),a("v-flex",{attrs:{md12:""}},[a("v-card",[a("v-card-title",[e._v("\n          Broadcast History\n          "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"rows-per-page-items":e.rowsPerPageItems,items:e.all_messages,loading:!0,search:e.search,"show-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{on:{click:function(e){t.expanded=!t.expanded}}},[a("td",[e._v(e._s(t.item.cadre.name))]),e._v(" "),a("td",[e._v(e._s(t.item.created_by))]),e._v(" "),a("td",[e._v(e._s(t.item.approved_by))]),e._v(" "),a("td",[e._v(e._s(t.item.facility.name))]),e._v(" "),a("td",[e._v(e._s(t.item.created_at))]),e._v(" "),a("td",[e._v(e._s(t.item.message))])])]}}])},[a("template",{slot:"no-data"},[a("v-progress-linear",{attrs:{slot:"progress",indeterminate:""},slot:"progress"})],1),e._v("\n           "+e._s(e.all_messages)+"\n\n          "),e._v(" "),a("v-alert",{attrs:{slot:"no-results",value:!0,color:"success",icon:"mdi-emoticon-sad"},slot:"no-results"},[e._v('\n            Your search for "'+e._s(e.search)+'" found no results.\n          ')])],2)],1)],1)],1)],1)},r=[],n=a("4795"),o=a.n(n),c=a("bc3a"),i=a.n(c),l=a("2f62");function u(e,t,a,s,r,n,o){try{var c=e[n](o),i=c.value}catch(l){return void a(l)}c.done?t(i):Promise.resolve(i).then(s,r)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function o(e){u(n,s,r,o,c,"next",e)}function c(e){u(n,s,r,o,c,"throw",e)}o(void 0)}))}}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var b={data:function(){return{output:"",result:"",search:"",isLoading:!0,snackbar:!1,rowsPerPageItems:[100,500,1e3],all_messages:[],headers:[{sortable:!1,text:"Cadre",value:"cadre_id"},{sortable:!1,text:"Created By",value:"created_by"},{sortable:!1,text:"Approved By",value:"approved_by"},{sortable:!1,text:"Facility",value:"facility"},{sortable:!1,text:"Time",value:"created_at"},{sortable:!1,text:"Message",value:"message"}]}},computed:_({},Object(l["c"])({user:"auth/user"})),created:function(){this.getBroadcast()},methods:{getBroadcast:function(){var e=this;1===this.user.role_id||5===this.user.role_id?i.a.get("broadcasts/web/all").then((function(t){e.all_messages=t.data.data,e.loopT(t.data.links.next),e.isLoading=!1})).catch((function(){e.result="Check your internet connection or retry logging in.",e.snackbar=!0})):2===this.user.role_id?i.a.get("broadcasts/web/partner/history/2").then((function(t){e.all_messages=t.data.data,e.loopT(t.data.links.next),e.isLoading=!1})).catch((function(){e.result="Check your internet connection or retry logging in.",e.snackbar=!0})):4===this.user.role_id&&i.a.get("broadcasts/web/history/".concat(this.user.hcw.facility_id)).then((function(t){e.all_messages=t.data.data,e.loopT(t.data.links.next),e.isLoading=!1})).catch((function(){e.snackbar=!0,e.result="Check your internet connection or retry logging in."}))},loopT:function(e){var t=this;return d(o.a.mark((function a(){var s,r,n,c;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=[],s=0;case 2:if(!(s<1)){a.next=14;break}if(null==e){a.next=11;break}return a.next=6,i.a.get(e);case 6:n=a.sent,e=n.data.links.next,t.all_messages=t.all_messages.concat(n.data.data),a.next=12;break;case 11:s=100;case 12:a.next=2;break;case 14:if(5===t.user.role_id){for(c in t.all_messages)t.all_messages[c].facility&&t.all_messages[c].facility.county===t.user.hcw.county&&r.push(t.all_messages[c]);t.all_messages=r}case 15:case"end":return a.stop()}}),a)})))()}}},h=b,p=a("2877"),g=Object(p["a"])(h,s,r,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0b1bd9.9ebadfe8.js.map