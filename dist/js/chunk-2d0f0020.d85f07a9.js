(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0020"],{"9b12":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[n("v-layout",{attrs:{"justify-center":"",wrap:""}},[n("v-flex",{attrs:{md12:""}},[n("v-snackbar",{attrs:{timeout:12e3,color:"error",top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[n("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[e._v("\n          mdi-bell-plus\n        ")]),e._v(" "),n("div",[e._v(" "+e._s(e.output.error)+" "+e._s(e.result))]),e._v(" "),n("v-icon",{attrs:{size:"16"},on:{click:function(t){e.snackbar=!1}}},[e._v("\n          mdi-close-circle\n        ")])],1),e._v(" "),n("material-card",{attrs:{color:"green",title:"Broadcast Messages"}},[n("v-card-text",[n("div"),e._v(" "),n("p",{staticClass:"display-1 text--primary"},[e._v("\n            List of COVID19 Exposures\n          ")])]),e._v(" "),n("v-container",{attrs:{"py-0":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:"",md10:""}},[n("v-text-field",{attrs:{"append-icon":"mdi-search-web",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-btn",{attrs:{loading:e.downLoading,color:"primary"},on:{click:e.handleDownload}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-download")]),e._v("Export Excel\n              ")],1)],1)],1)],1),n("br"),e._v(" "),n("v-data-table",{attrs:{headers:e.headers,items:e.exposures,search:e.search,"rows-per-page-items":e.rowsPerPageItems,loading:!0},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{on:{click:function(e){t.expanded=!t.expanded}}},[n("td",[e._v(e._s(e.exposures.indexOf(t.item)+1))]),e._v(" "),n("td",[e._v(e._s(t.item.gender))]),e._v(" "),n("td",[e._v(e._s(t.item.cadre))]),e._v(" "),n("td",[e._v(e._s(t.item.facility))]),e._v(" "),n("td",[e._v(e._s(t.item.facility_level))]),e._v(" "),n("td",[e._v(e._s(t.item.county))]),e._v(" "),n("td",[e._v(e._s(t.item.sub_county))]),e._v(" "),n("td",[e._v(e._s(t.item.risk_assessment_recommendation))]),e._v(" "),n("td",[e._v(e._s(t.item.isolation_start_date))]),e._v(" "),n("td",[t.expanded?n("v-icon",[e._v("mdi-arrow-down")]):n("v-icon",[e._v("mdi-arrow-right")])],1)])]}},{key:"expand",fn:function(t){return[n("v-card",{attrs:{outlined:"",dark:!0}},[n("v-container",{attrs:{"py-0":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-card-text",[e._v("\n                      Facility: "+e._s(t.item.facility)+" "),n("br"),e._v("\n                      Transmission Mode: "+e._s(t.item.transmission_mode)+" "),n("br"),e._v("\n                      Contact With: "+e._s(t.item.contact_with)+" "),n("br"),e._v("\n                      Date Of Contact: "+e._s(t.item.date_of_contact)+" \n                      \n                    ")])],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md4:""}},[n("v-card-text",[e._v("\n                      IPC Training: "+e._s(t.item.ipc_training)+" "),n("br"),e._v("\n                      PPE Worn: "+e._s(t.item.ppe_worn)+" "),n("br"),e._v("\n                      Specific PPE: "+e._s(t.item.ppes)+" "),n("br"),e._v("\n                      Risk Assesment Level: "+e._s(t.item.risk_assessment_outcome)+"\n                    ")])],1)],1)],1)],1)]}}])},[n("template",{slot:"no-data"},[n("v-progress-linear",{attrs:{slot:"progress",indeterminate:""},slot:"progress"})],1),e._v(" "),n("v-alert",{attrs:{slot:"no-results",value:!0,color:"success",icon:"mdi-emoticon-sad"},slot:"no-results"},[e._v('\n            Your search for "'+e._s(e.search)+'" found no results.\n          ')])],2)],1)],1)],1)],1)},a=[],s=n("4795"),o=n.n(s),i=n("bc3a"),c=n.n(i),l=n("2f62");function u(e,t,n,r,a,s,o){try{var i=e[s](o),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function o(e){u(s,r,a,o,i,"next",e)}function i(e){u(s,r,a,o,i,"throw",e)}o(void 0)}))}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={data:function(){return{rowsPerPageItems:[100,500,1e3],search:"",link:"",output:"",isLoading:!0,result:"",snackbar:!1,headers:[{text:"No.",value:"No."},{sortable:!1,text:"Gender",value:"gender"},{text:"Cadre",value:"cadre"},{text:"Facility",value:"facility"},{text:"Facility Level",value:"facility_level"},{text:"County",value:"county"},{text:"Sub County",value:"sub_county"},{text:"Risk Assesment Recommendation",value:"risk_assessment_recommendation"},{text:"Date Isolation Started",value:"isolation_start_date"}],exposures:[],downLoading:!1,filename:"Exposures ".concat((new Date).toISOString()),autoWidth:!0,bookType:"xlsx"}},computed:_({},Object(l["c"])({user:"auth/user",token:"auth/token"})),created:function(){this.exposures.length,this.getExp()},methods:{getExp:function(){var e=this;1===this.user.role_id||2===this.user.role_id||5===this.user.role_id?c.a.get("exposures/covid/all").then((function(t){e.exposures=t.data.data,e.loopT(t.data.links.next),e.isLoading=!1})).catch((function(t){e.error=!0,e.result="Check your internet connection or retry logging in.",e.snackbar=!0})):4===this.user.role_id&&c.a.get("exposures/covid/facility/".concat(this.user.hcw.facility_id)).then((function(t){e.exposures=t.data.data,e.loopT(t.data.links.next),e.isLoading=!1})).catch((function(t){e.error=!0,e.result="Check your internet connection or retry logging in.",e.snackbar=!0}))},loopT:function(e){var t=this;return d(o.a.mark((function n(){var r,a,s,i;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=[],r=0;case 2:if(!(r<1)){n.next=14;break}if(null==e){n.next=11;break}return n.next=6,c.a.get(e);case 6:s=n.sent,e=s.data.links.next,t.exposures=t.exposures.concat(s.data.data),n.next=12;break;case 11:r=100;case 12:n.next=2;break;case 14:if(5===t.user.role_id){for(i in t.exposures)t.exposures[i].facility&&t.exposures[i].county===t.user.county&&a.push(t.exposures[i]);t.exposures=a}case 15:case"end":return n.stop()}}),n)})))()},handleDownload:function(){var e=this;this.downLoading=!0,n.e("chunk-0e610f46").then(n.bind(null,"4bf8")).then((function(t){var n=["Gender","Cadre","Facility","Facility Level","County","Sub County","Risk Assesment Recommendation","Date Isolation Started"],r=["gender","cadre","facility","facility_level","county","sub_county","risk_assessment_recommendation","isolation_start_date"],a=e.exposures,s=e.formatJson(r,a);t.export_json_to_excel({header:n,data:s,filename:e.filename,autoWidth:e.autoWidth,bookType:e.bookType}),e.downloadLoading=!1}))},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e],t[e]}))}))}}},m=f,x=n("2877"),h=Object(x["a"])(m,r,a,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0f0020.d85f07a9.js.map