{"version":3,"sources":["webpack:///./src/views/AllBroadcasts.vue?827d","webpack:///src/views/AllBroadcasts.vue","webpack:///./src/views/AllBroadcasts.vue?9713","webpack:///./src/views/AllBroadcasts.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","snackbar","expression","staticClass","_v","_s","output","errors","result","on","$event","user","role_id","$router","push","search","headers","rowsPerPageItems","all_messages","scopedSlots","_u","key","fn","props","expanded","item","cadre","name","created_by","approved_by","facility","created_at","message","slot","staticRenderFns","data","isLoading","computed","created","getBroadcast","methods","component"],"mappings":"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","file":"js/chunk-2d0b1bd9.9ebadfe8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"wrap\":\"\"}},[_c('v-snackbar',{attrs:{\"timeout\":12000,\"color\":\"error\",\"top\":\"\"},model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_c('v-icon',{staticClass:\"mr-3\",attrs:{\"color\":\"white\"}},[_vm._v(\"\\n        mdi-bell-plus\\n      \")]),_vm._v(\" \"),_c('div',[_vm._v(\" \"+_vm._s(_vm.output.errors)+\" \"+_vm._s(_vm.result))]),_vm._v(\" \"),_c('v-icon',{attrs:{\"size\":\"16\"},on:{\"click\":function($event){_vm.snackbar = false}}},[_vm._v(\"\\n        mdi-close-circle\\n      \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\",\"text-xs-right\":\"\"}},[(_vm.user.role_id === 1 || _vm.user.role_id === 2 || _vm.user.role_id === 5)?_c('div',[_c('v-btn',{staticClass:\"mx-0 font-weight-light \",attrs:{\"color\":\"success\"},on:{\"click\":function($event){_vm.$router.push('new_bulk_broadcast')}}},[_vm._v(\"\\n          Send A Bulk Broadcast\\n        \")]),_vm._v(\" \"),_c('v-btn',{staticClass:\"mx-0 font-weight-light \",attrs:{\"color\":\"success\"},on:{\"click\":function($event){_vm.$router.push('new_broadcast')}}},[_vm._v(\"\\n          Send A New Broadcast\\n        \")])],1):_c('div',[_c('v-btn',{staticClass:\"mx-0 font-weight-light \",attrs:{\"color\":\"success\"},on:{\"click\":function($event){_vm.$router.push('new_broadcast')}}},[_vm._v(\"\\n          Send A New Broadcast\\n        \")])],1)]),_vm._v(\" \"),_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"\\n          Broadcast History\\n          \"),_c('v-spacer'),_vm._v(\" \"),_c('v-text-field',{attrs:{\"append-icon\":\"mdi-magnify\",\"label\":\"Search\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_vm._v(\" \"),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"rows-per-page-items\":_vm.rowsPerPageItems,\"items\":_vm.all_messages,\"loading\":true,\"search\":_vm.search,\"show-actions\":\"\",\"item-key\":\"id\"},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_c('tr',{on:{\"click\":function($event){props.expanded = !props.expanded}}},[_c('td',[_vm._v(_vm._s(props.item.cadre.name))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(props.item.created_by))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(props.item.approved_by))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(props.item.facility.name))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(props.item.created_at))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(props.item.message))])])]}}])},[_c('template',{slot:\"no-data\"},[_c('v-progress-linear',{attrs:{\"slot\":\"progress\",\"indeterminate\":\"\"},slot:\"progress\"})],1),_vm._v(\"\\n           \"+_vm._s(_vm.all_messages)+\"\\n\\n          \"),_vm._v(\" \"),_c('v-alert',{attrs:{\"slot\":\"no-results\",\"value\":true,\"color\":\"success\",\"icon\":\"mdi-emoticon-sad\"},slot:\"no-results\"},[_vm._v(\"\\n            Your search for \\\"\"+_vm._s(_vm.search)+\"\\\" found no results.\\n          \")])],2)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container\n    fill-height\n    fluid\n    grid-list-xl\n  >\n    <v-layout\n      justify-center\n      wrap\n    >\n\n      <v-snackbar\n        v-model=\"snackbar\"\n        :timeout=\"12000\"\n        color=\"error\"\n        top>\n        <v-icon\n          color=\"white\"\n          class=\"mr-3\"\n        >\n          mdi-bell-plus\n        </v-icon>\n        <div> {{ output.errors }} {{ result }}</div>\n        <v-icon\n          size=\"16\"\n          @click=\"snackbar = false\"\n        >\n          mdi-close-circle\n        </v-icon>\n      </v-snackbar>\n\n      <v-flex\n        xs12\n        text-xs-right\n      >\n\n        <div v-if=\"user.role_id === 1 || user.role_id === 2 || user.role_id === 5\">\n          <v-btn\n            class=\"mx-0 font-weight-light \"\n            color=\"success\"\n            @click=\"$router.push('new_bulk_broadcast')\"\n          >\n            Send A Bulk Broadcast\n          </v-btn>\n\n          <v-btn\n            class=\"mx-0 font-weight-light \"\n            color=\"success\"\n            @click=\"$router.push('new_broadcast')\"\n          >\n            Send A New Broadcast\n          </v-btn>\n        </div>\n\n        <div v-else>\n          <v-btn\n            class=\"mx-0 font-weight-light \"\n            color=\"success\"\n            @click=\"$router.push('new_broadcast')\"\n          >\n            Send A New Broadcast\n          </v-btn>\n        </div>\n\n      </v-flex>\n\n      <v-flex\n        md12\n      >\n        <v-card>\n          <v-card-title>\n            Broadcast History\n            <v-spacer/>\n            <v-text-field\n              v-model=\"search\"\n              append-icon=\"mdi-magnify\"\n              label=\"Search\"\n              single-line\n              hide-details\n            />\n\n          </v-card-title>\n          <v-data-table\n            :headers=\"headers\"\n            :rows-per-page-items=\"rowsPerPageItems\"\n            :items=\"all_messages\"\n            :loading=\"true\"\n            :search=\"search\"\n            class=\"elevation-1\"\n            show-actions\n            item-key=\"id\"\n          >\n\n            <template slot=\"no-data\">\n              <v-progress-linear\n                slot=\"progress\"\n                indeterminate/>\n            </template>\n             {{all_messages}}\n\n            <template\n              slot=\"items\"\n              slot-scope=\"props\">\n              <tr @click=\"props.expanded = !props.expanded\">\n                <td>{{ props.item.cadre.name }}</td>\n                <td>{{ props.item.created_by }}</td>\n                <td>{{ props.item.approved_by }}</td>\n                <td>{{ props.item.facility.name }}</td> \n                <td>{{ props.item.created_at }}</td>\n                <td>{{ props.item.message }}</td>\n                \n              </tr>\n            </template>\n            <v-alert\n              slot=\"no-results\"\n              :value=\"true\"\n              color=\"success\"\n              icon=\"mdi-emoticon-sad\">\n              Your search for \"{{ search }}\" found no results.\n            </v-alert>\n\n          </v-data-table>\n        </v-card>\n      </v-flex>\n\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { mapGetters } from 'vuex'\nexport default {\n  data () {\n    return {\n      output: '',\n      result: '',\n      search: '',\n      isLoading: true,\n      snackbar: false,\n      rowsPerPageItems: [100, 500, 1000],\n      all_messages: [],\n      headers: [\n        {\n          sortable: false,\n          text: 'Cadre',\n          value: 'cadre_id'\n        },\n        {\n          sortable: false,\n          text: 'Created By',\n          value: 'created_by'\n        },\n        {\n          sortable: false,\n          text: 'Approved By',\n          value: 'approved_by'\n        },\n        {\n          sortable: false,\n          text: 'Facility',\n          value: 'facility'\n        },\n        {\n          sortable: false,\n          text: 'Time',\n          value: 'created_at'\n        },\n        {\n          sortable: false,\n          text: 'Message',\n          value: 'message'\n        }\n      ]\n    }\n  },\n  computed: {\n    ...mapGetters({\n      user: 'auth/user'\n    })\n  },\n  created () {\n    this.getBroadcast()\n  },\n\n  methods: {\n    getBroadcast () {\n      if (this.user.role_id === 1 || this.user.role_id === 5) {\n        axios.get(`broadcasts/web/all`)\n          .then((broadcast) => {\n            this.all_messages = broadcast.data.data\n            this.loopT(broadcast.data.links.next)\n            this.isLoading = false\n          })\n          .catch(() => {\n            this.result = 'Check your internet connection or retry logging in.'\n            this.snackbar = true\n          })\n      } else if (this.user.role_id === 2 ) {\n        axios.get(`broadcasts/web/partner/history/2`)\n          .then((broadcast) => {\n            this.all_messages = broadcast.data.data\n            this.loopT(broadcast.data.links.next)\n            this.isLoading = false\n          })\n          .catch(() => {\n            this.result = 'Check your internet connection or retry logging in.'\n            this.snackbar = true\n          })\n      } else if (this.user.role_id === 4) {\n        axios.get(`broadcasts/web/history/${this.user.hcw.facility_id}`)\n          .then((broadcast) => {\n            this.all_messages = broadcast.data.data\n            this.loopT(broadcast.data.links.next)\n            this.isLoading = false\n          })\n          .catch(() => {\n            this.snackbar = true\n            this.result = 'Check your internet connection or retry logging in.'\n          })\n      }\n    },\n    async loopT (l) {\n      var i; var u = []\n      for (i = 0; i < 1;) {\n        if (l != null) {\n          let response = await axios.get(l)\n          l = response.data.links.next\n          this.all_messages = this.all_messages.concat(response.data.data)\n        } else {\n          i = 100\n        }\n      }\n      if (this.user.role_id === 5) {\n        for (var ex in this.all_messages) {\n          if (this.all_messages[ex].facility) {\n            if (this.all_messages[ex].facility.county === this.user.hcw.county) {\n              u.push(this.all_messages[ex])\n            }\n          }\n        }\n        this.all_messages = u\n      }\n    }\n  }\n}\n</script>-\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllBroadcasts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllBroadcasts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AllBroadcasts.vue?vue&type=template&id=619c2ae6&\"\nimport script from \"./AllBroadcasts.vue?vue&type=script&lang=js&\"\nexport * from \"./AllBroadcasts.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}