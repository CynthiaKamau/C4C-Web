(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2266de"],{e92f:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{"justify-center":"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md10:""}},[a("material-card",{attrs:{color:"green",title:"",text:"Kindly fill all the required fields"}},[a("v-card-text",[a("div"),t._v(" "),a("p",{staticClass:"display-1 text--primary"},[t._v("\n            Add A New Department\n          ")]),t._v(" "),a("div",{staticClass:"text--primary"},[t._v("\n            Kindly fill all the required fields\n          ")])]),t._v(" "),a("v-form",{on:{submit:t.AddDepartment}},[a("v-container",{attrs:{"py-0":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md5:""}},[a("label",[t._v("Facility:")]),t._v(" "),a("v-chip",{staticClass:"ma-2",attrs:{"x-large":""}},[t._v("\n                  "+t._s(t.user.hcw.facility.name)+"\n                ")])],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md7:""}},[a("v-text-field",{staticClass:"green-input",attrs:{rules:[t.rules.required],label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md3:""}}),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:"","text-xs-right":""}},[a("v-btn",{staticClass:"mx-0 font-weight-light",attrs:{type:"submit",color:"success"}},[t._v("\n                  Submit\n                ")])],1)],1)],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("material-card",{attrs:{color:"blue",title:"",text:"List"}},[a("v-layout",{attrs:{wrap:""}},[a("v-card-text",[a("div"),t._v(" "),a("p",{staticClass:"display-1 text--primary"},[t._v("\n              Department List\n            ")]),t._v(" "),a("v-btn",{staticStyle:{margin:"0 0 20px 20px"},attrs:{loading:t.downloadLoading,color:"primary"},on:{click:t.handleDownload}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-download")]),t._v("Export Excel\n            ")],1)],1),t._v(" "),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,loading:!0,"rows-per-page-items":t.rowsPerPageItems},scopedSlots:t._u([{key:"headerCell",fn:function(e){var r=e.header;return[a("span",{staticClass:"subheading text--darken-3",domProps:{textContent:t._s(r.text)}})]}},{key:"items",fn:function(e){var r=e.item;return[a("td",[t._v(t._s(r.department_name))]),t._v(" "),a("td",[t._v(t._s(r.created_at))])]}}])})]],2)],1)],1)],1),t._v(" "),a("v-snackbar",{attrs:{color:t.color,bottom:t.bottom,top:t.top,left:t.left,right:t.right,dark:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[a("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[t._v("\n      mdi-bell-plus\n    ")]),t._v(" "),a("div",[t._v(t._s(t.pre_out)+" "+t._s(t.output.message)),a("br"),t._v(" "+t._s(t.output.errors))]),t._v(" "),a("v-icon",{attrs:{size:"16"},on:{click:function(e){t.snackbar=!1}}},[t._v("\n      mdi-close-circle\n    ")])],1)],1)},n=[],s=a("bc3a"),i=a.n(s),o=a("2f62");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={data:function(){return{rowsPerPageItems:[50,250,500],name:"",headers:[{sortable:!1,text:"Name",value:"department_name"},{sortable:!1,text:"Created On",value:"created_at"}],items:[],rules:{required:function(t){return!!t||"Required."}},resp:!1,output:"",pre_out:"",color:null,colors:["success","error"],top:!0,bottom:!1,left:!1,right:!1,snackbar:!1,downloadLoading:!1,filename:"Departments",autoWidth:!0,bookType:"xlsx"}},computed:l({},Object(o["c"])({user:"auth/user"})),created:function(){this.DepartmentList()},methods:{checkData:function(){return""==this.user.hcw.facility.id?(this.pre_out="User not attached to a facility",this.snack("top","center"),!1):""!=this.name||(this.pre_out="Provide department name to proceed",this.snack("top","center"),!1)},DepartmentList:function(){var t=this;i.a.get("facility_departments/".concat(this.user.hcw.facility.id)).then((function(e){t.items=e.data.data})).catch((function(t){return console.log(t.message)}))},AddDepartment:function(t){var e=this;t.preventDefault();var a=this.user.hcw.facility.id;this.checkData()&&i.a.post("facilities/department/add",{facility_id:a,department_name:this.name}).then((function(t){e.output=t.data,e.resp=Boolean(t.data.success),e.snack("top","center"),e.items=[],e.DepartmentList()})).catch((function(t){e.output=t,e.snack("top","center")}))},handleDownload:function(){var t=this;this.downloadLoading=!0,a.e("chunk-0e610f46").then(a.bind(null,"4bf8")).then((function(e){var a=["Name","Created On"],r=["department_name","created_at"],n=t.items,s=t.formatJson(r,n);e.export_json_to_excel({header:a,data:s,filename:t.filename,autoWidth:t.autoWidth,bookType:t.bookType}),t.downloadLoading=!1}))},formatJson:function(t,e){return console.log(e),e.map((function(a){return t.map((function(t){return"timestamp"===t?parseTime(a[t]):(console.log(e),a[t])}))}))},snack:function(){this.top=!1,this.bottom=!1,this.left=!1,this.right=!1;for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];for(var r=0,n=e;r<n.length;r++){var s=n[r];this[s]=!0}this.resp?this.color=this.colors[0]:this.color=this.colors[1],this.snackbar=!0}}},p=u,m=a("2877"),f=Object(m["a"])(p,r,n,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d2266de.21bb34d6.js.map