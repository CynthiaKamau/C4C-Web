{"version":3,"sources":["webpack:///./src/views/BulkBroadcast.vue?609a","webpack:///src/views/BulkBroadcast.vue","webpack:///./src/views/BulkBroadcast.vue?9d83","webpack:///./src/views/BulkBroadcast.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","staticStyle","handleSuccess","beforeUpload","ref","on","$event","preventDefault","post_BulkBroadcast","model","value","callback","$$v","valid","expression","rules","required","phoneNo","_s","textRules","message","validate","alert","dialog1","output","error","staticRenderFns","components","data","tableHeader","phoneNumbers","watch","val","setTimeout","methods","$refs","form","e","phone_numbers","String","isLt1M","$message","type","r","header","is_data","results","mobile","slice","console","log","splice","push","component"],"mappings":"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","file":"js/chunk-2d0c26ac.64540907.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md11\":\"\"}},[_c('material-card',{attrs:{\"color\":\"green\",\"title\":\"New Broadcast\",\"text\":\"Kindly fill all the required fields\"}},[_c('v-card-text',[_c('p',{staticClass:\"display-1 text--primary\"},[_vm._v(\"\\n              New Bulk Broadcast\\n            \")]),_vm._v(\" \"),_c('div',{staticClass:\"text--primary\"},[_vm._v(\"\\n              If you are uploading an exel, the column name of the phone numbers should be 'mobile'\\n            \")])]),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"10%\"}},[_c('upload-excel-component',{attrs:{\"on-success\":_vm.handleSuccess,\"before-upload\":_vm.beforeUpload}})],1),_vm._v(\" \"),_c('v-form',{ref:\"form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.post_BulkBroadcast($event)}},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-container',{attrs:{\"py-0\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"rules\":[_vm.rules.required],\"label\":\"Add Phone Numbers Seperated By A Comma\",\"required\":\"\",\"single-line\":\"\"},model:{value:(_vm.phoneNo),callback:function ($$v) {_vm.phoneNo=$$v},expression:\"phoneNo\"}},[_vm._v(\"\\n                \"+_vm._s(_vm.phoneNo)+\"\\n                \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-textarea',{attrs:{\"rules\":_vm.textRules,\"label\":\"Message\",\"counter\":\"\",\"placeholder\":\"Write here\",\"required\":\"\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-btn',{staticClass:\"mr-4 success\",attrs:{\"disabled\":!_vm.valid,\"type\":\"submit\"},on:{\"click\":function($event){_vm.validate(); _vm.alert=!_vm.alert; _vm.dialog1=true}}},[_vm._v(\"\\n                submit\")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-dialog',{attrs:{\"max-width\":\"290\",\"lazy\":\"\"},model:{value:(_vm.dialog1),callback:function ($$v) {_vm.dialog1=$$v},expression:\"dialog1\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('v-progress-circular',{staticClass:\"primary--text\",attrs:{\"size\":70,\"indeterminate\":\"\"}})],1)],1)],1),_vm._v(\" \"),_c('v-alert',{attrs:{\"value\":_vm.alert,\"icon\":\"mdi-alert\",\"dismissible\":\"\",\"outline\":\"\",\"color\":\"error\",\"elevation\":\"2\"}},[_c('h6',[_vm._v(\" \"+_vm._s(_vm.output.error)+\" \"+_vm._s(_vm.output.message)+\" \")])])],1)],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container\n    fill-height\n    fluid\n    grid-list-xl>\n    <v-layout\n      justify-center\n      wrap\n      >\n      <v-flex\n        xs12\n        md11\n        >\n        <material-card\n          color=\"green\"\n          title=\"New Broadcast\"\n          text=\"Kindly fill all the required fields\"\n          >\n          <v-card-text>\n              <p class=\"display-1 text--primary\">\n                New Bulk Broadcast\n              </p>\n\n              <div class=\"text--primary\">\n                If you are uploading an exel, the column name of the phone numbers should be 'mobile'\n              </div>\n          </v-card-text>\n\n          <div style=\"height:10%\">\n            <upload-excel-component\n            :on-success=\"handleSuccess\"\n            :before-upload=\"beforeUpload\" />\n          </div>\n\n          <v-form\n            ref=\"form\"\n            v-model=\"valid\"\n            @submit.prevent=\"post_BulkBroadcast\">\n            <v-container py-0>\n              <v-layout wrap>\n                <v-flex\n                  xs12\n                >\n                  <v-text-field\n                    :rules=\"[rules.required]\"\n                    v-model=\"phoneNo\"\n                    label=\"Add Phone Numbers Seperated By A Comma\"\n                    required\n                    single-line\n                  >\n                  {{phoneNo}}\n                  </v-text-field>\n                </v-flex>\n\n                <v-flex\n                  xs12\n                >\n                  <v-textarea\n                    :rules=\"textRules\"\n                    v-model=\"message\"\n                    label=\"Message\"\n                    counter\n                    placeholder=\"Write here\"\n                    required\n                  />\n                </v-flex>\n\n              <v-flex\n              xs12\n              >\n                <v-btn\n                  :disabled=\"!valid\"\n                  class=\"mr-4 success\"\n                  type=\"submit\"\n                  @click=\"validate(); alert=!alert; dialog1=true \">\n                  submit</v-btn>\n              </v-flex>\n\n              <v-flex\n                xs12\n              >\n                <v-dialog\n                  v-model=\"dialog1\"\n                  max-width=\"290\"\n                  lazy>\n                  <v-card>\n                    <v-card-text class=\"text-xs-center\">\n                      <v-progress-circular\n                        :size=\"70\"\n                        indeterminate\n                        class=\"primary--text\"/>\n                    </v-card-text>\n                  </v-card>\n                </v-dialog>\n                <v-alert\n                  :value=\"alert\"\n                    icon = \"mdi-alert\"\n                    dismissible\n                    outline color=\"error\"\n                    elevation=\"2\"\n                >\n                  <h6> {{ output.error }} {{ output.message }} </h6>\n                </v-alert>\n              </v-flex>\n\n              </v-layout>\n            </v-container>\n          </v-form>\n\n        </material-card>\n      </v-flex>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport axios from 'axios'\nimport UploadExcelComponent from '@/components/UploadExcel/index.vue'\n\nexport default {\n  components: { UploadExcelComponent },\n  data () {\n    return {\n      phoneNo: [],\n      tableHeader: [],\n      valid: true,\n      dialog1: false,\n      alert: false,\n      output: '',\n      phoneNumbers: [],\n      message: '',\n      rules: {\n        required: value => !!value || 'This field is required.'\n      },\n      textRules: [v => v.length <= 160 || 'Max of 160 Characters' || 'This field is required.'],\n    }\n  },\n\n  watch: {\n    dialog1 (val) {\n      if (!val) return\n      setTimeout(() => (this.dialog1 = false), 4000)\n    }\n  },\n\n  methods: {\n    validate () {\n      this.$refs.form.validate()\n    },\n\n    post_BulkBroadcast (e) {\n      e.preventDefault()\n      axios.post('broadcasts/web/direct', {\n        phone_numbers: String(this.phoneNo),\n        message: this.message\n      })\n        .then((response) => {\n          this.output = response.data\n          this.resp = Boolean(response.data.success)\n          this.alert = true\n          this.$router.push('/all_broadcasts')\n        })\n        .catch(error => {\n          this.output = error\n          this.alert = true\n        })\n    },\n    beforeUpload (file) {\n      const isLt1M = file.size / 1024 / 1024 < 1\n\n      if (isLt1M) {\n        return true\n      }\n\n      this.$message({\n        message: 'Please do not upload files larger than 1m in size.',\n        type: 'warning'\n      })\n      return false\n    },\n    handleSuccess ({ results, header }) {\n      this.tableHeader = header\n      this.is_data = false\n      for (var r in results) {\n        if (String(results[r].mobile).slice(0,3) != '254' && String(results[r].mobile).slice(0,1) === '7') {\n          results[r].mobile = '254'+ String(results[r].mobile)\n        } else if (String(results[r].mobile).length < 5) {\n          console.log(results.splice(r,1))\n          break\n        }\n        this.phoneNo.push(results[r].mobile)\n      }\n    },\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BulkBroadcast.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BulkBroadcast.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BulkBroadcast.vue?vue&type=template&id=54712b97&\"\nimport script from \"./BulkBroadcast.vue?vue&type=script&lang=js&\"\nexport * from \"./BulkBroadcast.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}