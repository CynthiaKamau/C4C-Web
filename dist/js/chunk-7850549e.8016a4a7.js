(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7850549e"],{"3f58":function(t,e,i){},a37c:function(t,e,i){"use strict";var r=i("3f58"),a=i.n(r);a.a},e41e:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"ScrollableDiv"}},[i("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[i("v-layout",{attrs:{"justify-center":"",wrap:""}},[i("v-flex",{attrs:{xs12:"",md11:""}},[i("v-card",[i("v-card-text",[i("div"),t._v(" "),i("p",{staticClass:"display-1 text--primary"},[t._v("\n\n              Edit Facility Resource\n            ")])]),t._v(" "),i("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:t.editProtocal},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-container",{attrs:{"py-0":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",md12:""}},[i("v-text-field",{staticClass:"purple-input",attrs:{id:"title",rules:t.titleRules,required:"",label:"Title"},model:{value:t.protocol.title,callback:function(e){t.$set(t.protocol,"title",e)},expression:"protocol.title"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:"",md8:""}},[i("label",[t._v("Facility:")]),t._v(" "),i("v-chip",{staticClass:"ma-2",attrs:{"x-large":""}},[t._v("\n                    "+t._s(t.protocol.facility_id)+" : "+t._s(t.user.hcw.facility_name)+"\n                  ")])],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("ckeditor",{attrs:{id:"editorData",editor:t.editor,rules:"bodyRules"},model:{value:t.protocol.body,callback:function(e){t.$set(t.protocol,"body",e)},expression:"protocol.body"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("label",{attrs:{for:"document"}},[t._v("Upload Image:")]),t._v(" "),i("input",{ref:"file",attrs:{id:"file",value:"file",accept:"image/*",type:"file"},on:{change:function(e){t.handleImageChange()}}}),t._v(" "),i("v-img",{staticClass:"white--text align-end",attrs:{src:t.protocol.file,"max-height":"400px"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.showPreview,expression:"showPreview"}],attrs:{src:t.imagePreview}})]),t._v(" "),i("v-flex",[i("label",{attrs:{for:"document"}},[t._v("Upload Documents:")]),t._v(" "),i("input",{ref:"files",attrs:{id:"files",value:"files",type:"file",multiple:""},on:{change:function(e){t.handleFiles()}}}),t._v(" "),t._l(t.protocol.files,(function(e){return i("v-list",{key:e,staticClass:"file-listing"},[t._v(" "+t._s(e.file_name)+"\n                    "),i("span",{staticClass:"remove-file",on:{click:function(e){t.removeFile(t.key)}}},[t._v(" Remove ")])])})),t._v(" "),t._l(t.files,(function(e,r){return i("v-card",{key:e.id,staticClass:"file-listing"},[t._v(t._s(e.name)+"\n                    "),i("span",{staticClass:"remove-file",on:{click:function(e){t.removeFile(r)}}},[t._v(" Remove ")])])}))],2),t._v(" "),i("v-flex",{attrs:{xs12:"","text-xs-right":""}},[i("v-btn",{staticClass:"mx-0 font-weight-light",attrs:{disabled:!t.valid,color:"success",type:"submit"},on:{click:function(e){t.validateData(),t.alert=!t.alert,t.dialog1=!0}}},[t._v("\n                    Save\n                  ")]),t._v(" "),i("v-dialog",{attrs:{"max-width":"290",lazy:""},model:{value:t.dialog1,callback:function(e){t.dialog1=e},expression:"dialog1"}},[i("v-card",[i("v-card-text",{staticClass:"text-xs-center"},[i("v-progress-circular",{staticClass:"primary--text",attrs:{size:70,indeterminate:""}})],1)],1)],1),t._v(" "),i("v-alert",{attrs:{value:t.alert,icon:"mdi-alert",dismissible:"",outline:"",color:"error",elevation:"2"}},[i("h6",[t._v(" "+t._s(t.output.error)+" "+t._s(t.output.message)+" ")])])],1)],1)],1)],1)],1)],1)],1)],1)],1)},a=[],l=i("bc3a"),o=i.n(l),s=i("2f62"),n=i("fb3d"),c=i.n(n);function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var v={data:function(){return{editor:c.a,editorConfig:{},items:[],alert:!1,valid:!0,titleRules:[function(t){return!!t||"Title is required"}],bodyRules:[function(t){return!!t||"Fill in the required text"}],dialog1:!1,result:"",facility_id:"",protocol:{body:"",title:""},file:"",showPreview:!1,imagePreview:"",files:[],output:"",resp:"",rules:{required:function(t){return!!t||"Required."}}}},computed:f({},Object(s["c"])({user:"auth/user"})),watch:{dialog1:function(t){var e=this;t&&setTimeout((function(){return e.dialog1=!1}),8e3)}},created:function(){this.getProtocol()},methods:{validateData:function(){this.$refs.form.validate()},handleFiles:function(){for(var t=this.$refs.files.files,e=0;e<t.length;e++)this.files.push(t[e])},handleImageChange:function(t){this.file=this.$refs.file.files[0];var e=new FileReader;e.addEventListener("load",function(){this.showPreview=!0,this.imagePreview=e.result}.bind(this),!1),this.file&&/\.(jpe?g|png|gif)$/i.test(this.file.name)&&e.readAsDataURL(this.file)},removeFile:function(t){this.files.splice(t,1)},getProtocol:function(){var t=this,e=this.$route.params.id;o.a.get("resources/protocols/details/"+e).then((function(e){t.protocol=e.data.data})).catch((function(t){console.log(t)}))},editProtocal:function(t){var e=this;t.preventDefault();for(var i=new FormData,r=0;r<this.files.length;r++){var a=this.files[r];i.append("protocol_files["+r+"]",a)}i.append("image_file",this.file),i.append("title",this.protocol.title),i.append("body",this.protocol.body),i.append("facility_id",this.protocol.facility_id),i.append("protocol_id",this.protocol.id),o.a.post("resources/protocols/update",i,{headers:{"content-type":"multipart/form-data"}}).then((function(t){e.output=t.data,e.alert=!0,e.$router.push("/protocols")})).catch((function(t){e.output=t,e.alert=!0}))}}},p=v,h=(i("a37c"),i("2877")),m=Object(h["a"])(p,r,a,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-7850549e.8016a4a7.js.map