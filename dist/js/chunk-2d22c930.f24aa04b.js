(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c930"],{f48d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[r("v-layout",{attrs:{"justify-center":"",wrap:""}},[r("v-flex",{attrs:{xs12:"",md11:""}},[r("material-card",{attrs:{color:"green",title:"New Broadcast",text:"Kindly fill all the required fields"}},[r("v-card-text",[r("div"),e._v(" "),r("p",{staticClass:"display-1 text--primary"},[e._v("\n            New Broadcast\n          ")]),e._v(" "),r("div",{staticClass:"text--primary"},[e._v("\n            Kindly fill all the required fields\n          ")])]),e._v(" "),r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.postBroadcast(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-container",{attrs:{"py-0":""}},[r("v-layout",{attrs:{wrap:""}},[1===e.user.role_id||2===e.user.role_id||5==e.user.role_id?r("v-flex",{attrs:{xs12:""}},[r("v-combobox",{attrs:{items:e.all_facilities,"search-input":e.search,rules:[e.rules.required],"return-object":!0,"item-text":"name","item-value":"id","hide-selected":"",chips:"",label:"Select Facility",required:""},on:{"update:searchInput":function(t){e.search=t}},model:{value:e.facility,callback:function(t){e.facility=t},expression:"facility"}})],1):4===e.user.role.id?r("v-flex",[r("label",[e._v("Facility:")]),e._v(" "),r("v-chip",{staticClass:"ma-2",attrs:{"x-large":""}},[e._v("\n                  "+e._s(e.user.hcw.facility_name)+"\n                ")])],1):e._e(),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-select",{ref:"cadres",attrs:{items:e.all_cadres,rules:[e.rules.required],"item-text":"name","item-value":"id",multiple:"",chips:"",label:"Select Cadre",required:""},model:{value:e.cadres,callback:function(t){e.cadres=t},expression:"cadres"}},[r("v-list-tile",{attrs:{slot:"prepend-item",ripple:""},on:{click:e.toggle},slot:"prepend-item"},[r("v-list-tile-action",[r("v-icon",{attrs:{color:e.cadres.length>0?"indigo darken-4":""}},[e._v(e._s(e.icon))])],1),e._v(" "),r("v-list-tile-title",[e._v("Select All")])],1),e._v(" "),r("v-divider",{staticClass:"mt-2",attrs:{slot:"prepend-item"},slot:"prepend-item"})],1),e._v(" "),r("strong",[e._v(e._s(e.all_cadres.item))]),e._v("Â \n              ")],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-textarea",{attrs:{rules:e.textRules,counter:"",label:"Message",placeholder:"Write here",required:""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-btn",{staticClass:"mr-4 success",attrs:{disabled:!e.valid,loading:e.dialog1,type:"submit"},on:{click:function(t){e.validate(),e.dialog1=!0}}},[e._v("\n                  submit")])],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-dialog",{attrs:{"max-width":"290",lazy:""},model:{value:e.dialog1,callback:function(t){e.dialog1=t},expression:"dialog1"}},[r("v-card",[r("v-card-text",{staticClass:"text-xs-center"},[r("v-progress-circular",{staticClass:"primary--text",attrs:{size:70,indeterminate:""}})],1)],1)],1),e._v(" "),r("v-alert",{attrs:{value:e.alert,icon:"mdi-alert",dismissible:"",outline:"",color:"error",elevation:"2"}},[r("h6",[e._v(" "+e._s(e.output.error)+" "+e._s(e.output.message)+" ")])])],1)],1)],1)],1)],1)],1)],1)],1)},i=[],s=r("bc3a"),l=r.n(s),c=r("2f62");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={data:function(){return{all_cadres:[],all_facilities:[],valid:!0,alert:!1,dialog1:!1,search:null,facility:"",output:"",cadres:[],message:"",rules:{required:function(e){return!!e||"This field is required."}},textRules:[function(e){return e.length<=360||"Max of 160 Characters"}]}},computed:o(o({},Object(c["c"])({user:"auth/user"})),{},{selectedAllCadres:function(){return this.cadres.length===this.all_cadres.length},selectedOneCadre:function(){return this.cadres.length>0&&!this.selectedAllCadres},icon:function(){return this.selectedAllCadres?"mdi-close-box":this.selectedOneCadre?"mdi-minus-box":"mdi-checkbox-blank-outline"}}),watch:{dialog1:function(e){var t=this;e&&setTimeout((function(){return t.dialog1=!1}),8e3)}},created:function(){this.getCadres(),this.getFacilities()},methods:{toggle:function(){var e=this;this.$nextTick((function(){e.selectedAllCadres?e.cadres=[]:e.cadres=e.all_cadres.slice()}))},validate:function(){this.$refs.form.validate()},getCadres:function(){var e=this;l.a.get("cadres").then((function(t){e.all_cadres=t.data.data})).catch((function(e){return console.log(e.message)}))},getFacilities:function(){var e=this;l.a.get("facilities").then((function(t){var r=t.data.data;if(5===e.user.role_id)for(var a in r)r[a].county===e.user.county&&e.all_facilities.push(r[a]);else e.all_facilities=r})).catch((function(e){return console.log(e.message)}))},postBroadcast:function(e){var t=this;e.preventDefault(),1===this.user.role_id||2===this.user.role_id||5===this.user.role_id?l.a.post("broadcasts/web/create",{facility_id:this.facility.id,cadres:this.cadres.map((function(e){return e.id})),message:this.message}).then((function(e){t.output=e.data,t.alert=!0,t.$router.push("/all_broadcasts")})).catch((function(e){t.output=e,t.alert=!0})):4===this.user.role_id&&l.a.post("broadcasts/web/create",{facility_id:this.user.hcw.facility_id,cadres:this.cadres.map((function(e){return e.id})),message:this.message}).then((function(e){t.output=e.data,t.alert=!0,t.$router.push("/all_broadcasts")})).catch((function(e){t.output=e,t.alert=!0}))},snack:function(){this.top=!1,this.bottom=!1,this.left=!1,this.right=!1;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var a=0,i=t;a<i.length;a++){var s=i[a];this[s]=!0}this.resp?this.color=this.colors[0]:this.color=this.colors[1],this.snackbar=!0}}},f=d,v=r("2877"),h=Object(v["a"])(f,a,i,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d22c930.f24aa04b.js.map