{"version":3,"sources":["webpack:///./src/views/NewProtocol.vue?4193","webpack:///./src/views/NewProtocol.vue?7936","webpack:///src/views/NewProtocol.vue","webpack:///./src/views/NewProtocol.vue?4f1d","webpack:///./src/views/NewProtocol.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","ref","on","postProtocal","model","value","callback","$$v","valid","expression","v","title","user","role_id","_s","hcw","facility_name","all_facilities","load","facility","_e","editor","editorData","_l","error","key","$event","handleImageChange","directives","name","rawName","imagePreview","handleFiles","file","id","removeFile","dialog1","validate","alert","output","message","staticRenderFns","data","editorConfig","items","errors","result","facility_id","showPreview","files","computed","watch","val","setTimeout","created","getFacilities","methods","$refs","form","i","uploadedFiles","length","push","reader","addEventListener","test","readAsDataURL","splice","e","preventDefault","formData","append","headers","component"],"mappings":"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","file":"js/chunk-51668448.4301dbce.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewProtocol.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewProtocol.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md11\":\"\"}},[_c('v-card',[_c('v-card-text',[_c('p',{staticClass:\"display-1 text--primary\"},[_vm._v(\"\\n\\n            Add A New Facility Resource\\n          \")]),_vm._v(\" \"),_c('div',{staticClass:\"text--primary\"},[_vm._v(\"\\n            Kindly fill all the required fields\\n          \")])]),_vm._v(\" \"),_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},on:{\"submit\":_vm.postProtocal},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-container',{attrs:{\"py-0\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md12\":\"\"}},[_c('v-text-field',{staticClass:\"purple-input\",attrs:{\"id\":\"title\",\"rules\":[function (v) { return !!v || 'Title is required'; }],\"required\":\"\",\"label\":\"Title\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\",\"md8\":\"\"}},[_c('label',[_vm._v(\"Facility:\")]),_vm._v(\" \"),(_vm.user.role_id === 4)?_c('div',[_c('v-chip',{staticClass:\"ma-2\",attrs:{\"x-large\":\"\"}},[_vm._v(\"\\n                    \"+_vm._s(_vm.user.hcw.facility_name)+\"\\n                  \")])],1):(_vm.user.role_id === 1 || _vm.user.role_id === 2)?_c('div',[_c('v-combobox',{attrs:{\"items\":_vm.all_facilities,\"loading\":_vm.load,\"disabled\":_vm.load,\"rules\":[function (v) { return !!v || 'Facility is required'; }],\"item-text\":\"name\",\"item-value\":\"id\",\"clearable\":\"\",\"persistent-hint\":\"\",\"chips\":\"\"},model:{value:(_vm.facility),callback:function ($$v) {_vm.facility=$$v},expression:\"facility\"}})],1):_vm._e()]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('ckeditor',{attrs:{\"id\":\"editorData\",\"editor\":_vm.editor,\"required\":\"\"},model:{value:(_vm.editorData),callback:function ($$v) {_vm.editorData=$$v},expression:\"editorData\"}}),_vm._v(\" \"),_c('ul',_vm._l((_vm.errors),function(error){return _c('li',{key:error},[_vm._v(_vm._s(error))])}),0)],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('label',{attrs:{\"for\":\"document\"}},[_vm._v(\"Upload Image:\")]),_vm._v(\" \"),_c('input',{ref:\"file\",attrs:{\"id\":\"file\",\"value\":\"file\",\"accept\":\"image/*\",\"type\":\"file\"},on:{\"change\":function($event){_vm.handleImageChange()}}}),_vm._v(\" \"),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPreview),expression:\"showPreview\"}],attrs:{\"src\":_vm.imagePreview}})]),_vm._v(\" \"),_c('v-flex',[_c('label',{attrs:{\"for\":\"document\"}},[_vm._v(\"Upload Documents:\")]),_vm._v(\" \"),_c('input',{ref:\"files\",attrs:{\"id\":\"files\",\"value\":\"files\",\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":function($event){_vm.handleFiles()}}}),_vm._v(\" \"),_vm._l((_vm.files),function(file,key){return _c('v-card',{key:file.id,staticClass:\"file-listing\"},[_vm._v(_vm._s(file.name)+\"\\n                  \"),_c('span',{staticClass:\"remove-file\",on:{\"click\":function($event){_vm.removeFile(key)}}},[_vm._v(\" Remove \")])])})],2),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\",\"text-xs-right\":\"\"}},[_c('v-btn',{staticClass:\"mx-0 font-weight-light\",attrs:{\"disabled\":!_vm.valid,\"loading\":_vm.dialog1,\"color\":\"success\",\"type\":\"submit\"},on:{\"click\":function($event){_vm.validate(); _vm.dialog1=true}}},[_vm._v(\"\\n                  Submit\\n                \")]),_vm._v(\" \"),_c('v-dialog',{attrs:{\"max-width\":\"290\",\"lazy\":\"\"},model:{value:(_vm.dialog1),callback:function ($$v) {_vm.dialog1=$$v},expression:\"dialog1\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"text-xs-center\"},[_c('v-progress-circular',{staticClass:\"primary--text\",attrs:{\"size\":70,\"indeterminate\":\"\"}})],1)],1)],1),_vm._v(\" \"),_c('v-alert',{attrs:{\"value\":_vm.alert,\"icon\":\"mdi-alert\",\"dismissible\":\"\",\"outline\":\"\",\"color\":\"error\",\"elevation\":\"2\"}},[_c('h6',[_vm._v(\" \"+_vm._s(_vm.output.error)+\" \"+_vm._s(_vm.output.message)+\" \")])])],1)],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container\n    fill-height\n    fluid\n    grid-list-xl>\n    <v-layout\n      justify-center\n      wrap\n    >\n      <v-flex\n        xs12\n        md11\n      >\n        <v-card>\n\n          <v-card-text>\n            <p class=\"display-1 text--primary\">\n\n              Add A New Facility Resource\n            </p>\n            <div class=\"text--primary\">\n              Kindly fill all the required fields\n            </div>\n          </v-card-text>\n\n          <v-form\n            ref=\"form\"\n            v-model=\"valid\"\n            lazy-validation\n            @submit=\"postProtocal\">\n            <v-container py-0>\n              <v-layout wrap>\n\n                <v-flex\n                  xs12\n                  md12\n                >\n                  <v-text-field\n                    id=\"title\"\n                    :rules=\"[v => !!v || 'Title is required']\"\n                    v-model=\"title\"\n                    required\n                    label=\"Title\"\n                    class=\"purple-input\"/>\n                </v-flex>\n\n                <v-flex\n                  xs12\n                  md8>\n                  <label>Facility:</label>\n\n                  <div v-if=\"user.role_id === 4\">\n                    <v-chip\n                      class=\"ma-2\"\n                      x-large\n                    >\n                      {{ user.hcw.facility_name }}\n                    </v-chip>\n                  </div>\n\n                  <div v-else-if=\"user.role_id === 1 || user.role_id === 2\">\n                    <v-combobox\n                      v-model=\"facility\"\n                      :items=\"all_facilities\"\n                      :loading=\"load\"\n                      :disabled=\"load\"\n                      :rules=\"[v => !!v || 'Facility is required']\"\n                      item-text=\"name\"\n                      item-value=\"id\"\n                      clearable\n                      persistent-hint\n                      chips />\n                  </div>\n\n                </v-flex>\n                <v-flex xs12>\n                  <ckeditor\n                    id=\"editorData\"\n                    :editor=\"editor\"\n                    v-model=\"editorData\"\n                    required\n                  />\n                  <ul>\n                    <li\n                      v-for=\"error in errors\"\n                      :key=\"error\">{{ error }}</li>\n                  </ul>\n\n                </v-flex>\n\n                <v-flex xs12 >\n\n                  <label for=\"document\">Upload Image:</label>\n                  <input\n                    id=\"file\"\n                    ref=\"file\"\n                    value=\"file\"\n                    accept=\"image/*\"\n                    type=\"file\"\n                    @change=\"handleImageChange()\">\n\n                  <img\n                    v-show=\"showPreview\"\n                    :src=\"imagePreview\">\n                </v-flex>\n\n                <v-flex>\n                  <label for=\"document\">Upload Documents:</label>\n                  <input\n                    id=\"files\"\n                    ref=\"files\"\n                    value=\"files\"\n                    type=\"file\"\n                    multiple\n                    @change=\"handleFiles()\">\n\n                  <v-card\n                    v-for=\"(file, key) in files\"\n                    :key=\"file.id\"\n                    class=\"file-listing\">{{ file.name }}\n                    <span\n                      class=\"remove-file\"\n                      @click=\"removeFile(key)\"> Remove </span> </v-card>\n                </v-flex>\n\n                <v-flex\n                  xs12\n                  text-xs-right\n                >\n                  <v-btn\n                    :disabled=\"!valid\"\n                    :loading=\"dialog1\"\n                    class=\"mx-0 font-weight-light\"\n                    color=\"success\"\n                    type=\"submit\"\n                    @click=\"validate(); dialog1=true\"\n                  >\n                    Submit\n                  </v-btn>\n\n                  <v-dialog\n                    v-model=\"dialog1\"\n                    max-width=\"290\"\n                    lazy>\n                    <v-card>\n                      <v-card-text class=\"text-xs-center\">\n                        <v-progress-circular\n                          :size=\"70\"\n                          indeterminate\n                          class=\"primary--text\"/>\n                      </v-card-text>\n                    </v-card>\n                  </v-dialog>\n\n                  <v-alert\n                    :value=\"alert\"\n                    icon = \"mdi-alert\"\n                    dismissible\n                    outline\n                    color=\"error\"\n                    elevation=\"2\"\n                  >\n                    <h6> {{ output.error }} {{ output.message }} </h6>\n                  </v-alert>\n\n                </v-flex>\n              </v-layout>\n            </v-container>\n          </v-form>\n\n        </v-card>\n      </v-flex>\n\n    </v-layout>\n\n  </v-container>\n\n</template>\n\n<script>\nimport axios from 'axios'\nimport { mapGetters } from 'vuex'\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic'\n\nexport default {\n\n  data () {\n    return {\n      editor: ClassicEditor,\n      editorData: '',\n      editorConfig: { },\n      items: [],\n      errors: '',\n      alert: false,\n      valid: true,\n      dialog1: false,\n      result: '',\n      facility_id: '',\n      title: '',\n      file: '',\n      all_facilities: [],\n      facility: '',\n      showPreview: false,\n      imagePreview: '',\n      files: [],\n      output: '',\n      load: true\n\n    }\n  },\n\n  computed: {\n    ...mapGetters({\n      user: 'auth/user'\n    })\n  },\n  watch: {\n    dialog1 (val) {\n      if (!val) return\n      setTimeout(() => (this.dialog1 = false), 8000)\n    }\n  },\n  created () {\n    this.getFacilities()\n  },\n\n  methods: {\n    validate () {\n      this.$refs.form.validate()\n    },\n\n    getFacilities () {\n      axios.get('facilities')\n        .then((facilities) => {\n          this.all_facilities = facilities.data.data\n          this.load = false\n        })\n        .catch(error => console.log(error.message))\n    },\n\n    handleFiles () {\n      let uploadedFiles = this.$refs.files.files\n\n      for (var i = 0; i < uploadedFiles.length; i++) {\n        this.files.push(uploadedFiles[i])\n      }\n    },\n\n    handleImageChange (e) {\n      this.file = this.$refs.file.files[0]\n\n      let reader = new FileReader()\n\n      reader.addEventListener('load', function () {\n        this.showPreview = true\n        this.imagePreview = reader.result\n      }.bind(this), false)\n\n      if (this.file) {\n        if (/\\.(jpe?g|png|gif)$/i.test(this.file.name)) {\n          reader.readAsDataURL(this.file)\n        }\n      }\n    },\n\n    removeFile (key) {\n      this.files.splice(key, 1)\n    },\n\n    postProtocal (e) {\n      e.preventDefault()\n\n      this.errors = []\n\n      if (this.editorData == '') {\n        this.errors.push('Description is required.')\n      } else {\n        let formData = new FormData()\n\n        for (var i = 0; i < this.files.length; i++) {\n          let file = this.files[i]\n\n          formData.append('protocol_files[' + i + ']', file)\n        }\n        formData.append('image_file', this.file)\n        formData.append('title', this.title)\n        formData.append('body', this.editorData)\n        if (this.user.role_id === 4) {\n          formData.append('facility_id', this.user.hcw.facility_id)\n        } else if (this.user.role_id === 1) {\n          formData.append('facility_id', this.facility.id)\n        } else if (this.user.role_id === 2) {\n          formData.append('facility_id', this.facility.id)\n        }\n\n        axios.post('resources/protocols/create', formData, {\n          headers: {\n            'content-type': `multipart/form-data` }\n        })\n          .then((response) => {\n\n            this.output = response.data\n            this.alert = true\n            this.$router.push('/protocols')\n          })\n          .catch(error => {\n            this.output = error\n            console.log(error)\n            this.alert = true\n          })\n      }\n    }\n  }\n}\n\n</script>\n<style>\nspan.remove-file{\n  color:red;\n  cursor: pointer;\n}\nul {\n  list-style: none;\n  color: red;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewProtocol.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewProtocol.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewProtocol.vue?vue&type=template&id=5f7fb891&\"\nimport script from \"./NewProtocol.vue?vue&type=script&lang=js&\"\nexport * from \"./NewProtocol.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewProtocol.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}